<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Redirect with Save Menu</title>
<style>
  #saveURL {
    position: fixed;
    top: 12px;
    right: 12px;
    background: #007aff;
    color: #fff;
    padding: 8px 14px;
    border-radius: 8px;
    font-family: -apple-system, sans-serif;
    font-size: 16px;
    cursor: pointer;
    z-index: 999999;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>
<script>
  const params = new URLSearchParams(window.location.search);
  const target = params.get("to");

  if (target) {
    window.location.href = target;
  }

  // Trick: alle paar Sekunden prÃ¼fen, ob wir auf der Zielseite sind und dort MenÃ¼ einfÃ¼gen
  const injectMenu = setInterval(() => {
    try {
      if (!document.getElementById("saveURL")) {
        const btn = document.createElement("div");
        btn.id = "saveURL";
        btn.innerText = "ðŸ’¾ Save URL";
        btn.onclick = () => {
          const current = encodeURIComponent(window.location.href);
          window.location.href = `shortcuts://run-shortcut?name=SaveURL&input=${current}`;
        };
        document.body.appendChild(btn);
      }
    } catch (e) {
      // Ignorieren, falls DOM noch nicht bereit ist
    }
  }, 2000);
</script>
</body>
</html>
